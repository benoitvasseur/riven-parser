<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Riven Market</title>
  <link rel="stylesheet" href="styles/sidepanel.css">
</head>
<body>
  <div class="container">
    <header>
      <div class="header-content">
        <div class="header-left">
          <h1>üéÆ Riven Market</h1>
          <p class="subtitle">Welcome to the Riven Market</p>
        </div>
        <div class="header-right" id="userInfoHeader" style="display: none;">
          <div class="user-avatar-small">
            <span id="userInitialsHeader">?</span>
          </div>
          <div class="user-details-small">
            <span id="userNameHeader">User</span>
            <span id="userPlatformHeader" class="user-platform"></span>
          </div>
          <button id="logoutBtnHeader" class="btn btn-secondary btn-xs" title="Sign out">
            ‚Ü™Ô∏è
          </button>
        </div>
      </div>
    </header>
    
    <main>
      <!-- Login page -->
      <div id="loginPage" class="content">
        <div class="login-card">
          <h2>Sign In</h2>
          <p class="login-subtitle">Connect to your Warframe Market account</p>
          
          <div id="errorMessage" class="error-message" style="display: none;"></div>
          
          <form id="loginForm">
            <div class="form-group">
              <label for="email">Email</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                class="form-input" 
                placeholder="your@email.com"
                required
                autocomplete="email"
              >
            </div>
            
            <div class="form-group">
              <label for="password">Password</label>
              <input 
                type="password" 
                id="password" 
                name="password" 
                class="form-input" 
                placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                required
                autocomplete="current-password"
              >
            </div>
            
            <button type="submit" class="btn btn-primary btn-block btn-large" id="loginBtn">
              <span class="btn-icon">üéÆ</span>
              Sign In
            </button>
          </form>
          
          <div class="login-footer">
            <p>Don't have an account?</p>
            <a href="https://warframe.market/auth/register" target="_blank" class="link">
              Create an account on Warframe Market
            </a>
          </div>
        </div>
      </div>
      
      <!-- Main page (after login) -->
      <div id="mainPage" class="content" style="display: none;">
        <!-- Tabs -->
        <div class="tabs">
          <button class="tab-button active" data-tab="nouveau">New</button>
          <button class="tab-button" data-tab="rivens">Rivens</button>
        </div>
        
        <!-- Tab content -->
        <div class="tab-content">
          <div id="nouveauTab" class="tab-pane active">
            <div class="upload-section">
              <h3>Add a New Riven</h3>
              <p class="upload-subtitle">Upload a screenshot of your Riven</p>
              
              <div id="dropZone" class="drop-zone">
                <input type="file" id="fileInput" accept="image/png,image/jpeg,image/jpg" style="display: none;">
                <div class="drop-zone-content">
                  <div class="drop-zone-icon">üì∑</div>
                  <p class="drop-zone-text">Drag and drop an image here</p>
                  <p class="drop-zone-subtext">or</p>
                  <button type="button" class="btn btn-primary btn-sm" id="uploadBtn">
                    Choose a file
                  </button>
                  <p class="drop-zone-hint">PNG or JPG only</p>
                </div>
                <div id="imagePreview" class="image-preview" style="display: none;">
                  <img id="previewImg" src="" alt="Preview">
                  <button type="button" class="btn-remove" id="removeBtn" title="Remove">√ó</button>
                </div>
              </div>
              
              <!-- OCR Results Section -->
              <div id="ocrResultsSection" class="ocr-results-section" style="display: none;">
                <h3>OCR Results</h3>
                <div id="ocrStatus" class="ocr-status">
                  <span class="ocr-status-icon">‚è≥</span>
                  <span id="ocrStatusText">Processing image...</span>
                </div>
                <div id="ocrResults" class="ocr-results" style="display: none;">
                  <div class="ocr-confidence">
                    <span>Confidence: </span>
                    <span id="ocrConfidence" class="confidence-value">-</span>
                  </div>
                  <div class="ocr-text-container">
                    <label>Detected Text:</label>
                    <textarea id="ocrText" class="ocr-textarea" rows="10" readonly></textarea>
                  </div>
                  <button type="button" class="btn btn-primary" id="analyzeBtn">
                    Analyze Riven Data
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <div id="rivensTab" class="tab-pane">
            <!-- Rivens tab content (empty for now) -->
          </div>
        </div>
      </div>
    </main>
    
    <footer>
      <p>¬© 2026 Riven Market</p>
    </footer>
  </div>
  
  <!-- Tesseract.js Local -->
  <script src='libs/tesseract.min.js'></script>
  
  <script src="scripts/api.js"></script>
  <script type="module" src="scripts/modules-loader.js"></script>
  <script src="scripts/sidepanel.js"></script>
</body>
</html>
